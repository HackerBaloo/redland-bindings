<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "blah">
<html>
<head>
  <title>Redland - An RDF Application Framework - Installation instructions</title>
</head>
<body bgcolor="#ffffff" text="#000085">

<h1 align="center">Redland - An RDF Application Framework - Installation instructions</h1>


<h2>1. Getting the sources</h2>


<h3>1.1. Getting the sources from CVS</h3>

<p>Sorry - not yet publically available, but should be in the near
future.  Check back with the
<a href="http://www.redland.opensource.ac.uk/">Redland home page</a>
or the <a href="http://sourceforge.net/projects/librdf/">SourceForge site</a>
.</p>

<p>After the <tt>cvs checkout</tt> or <tt>cvs update</tt> you will
need to create the automake and autoconf derived files, as described
below in <em>create the configure program</em>.</p>


<h3>1.2. Getting source bundles</h3>

<p>The sources are available from
<a href="http://www.redland.opensource.ac.uk/dist/source/">http://www.redland.opensource.ac.uk/dist/source/</a> (master site) and also from the
<a href="http://sourceforge.net/projects/librdf/">SourceForge site</a>.</p>


<h2>2. Configuring and building</h2>

<h3>2.1. Create <tt>configure</tt> program</h3>

<p>If there is no <tt>configure</tt> program, you can create it 
using the <tt>autogen.sh</tt> script, as long as you have the
<a href="http://www.gnu.org/software/automake/automake.html">automake</a> and
<a href="http://www.gnu.org/software/autoconf/autoconf.html">autoconf</a>
tools.  Alternatively you can run them by hand with:</p>
<pre>
  aclocal; autoheader; automake --add-missing; autoconf
</pre>
<p>(Ignore any warnings from autoconf about AC_TRY_RUN, it is caused
by an autoconf macro and IMHO is an autoconf bug.)</p>

<h3>2.2. Options for <tt>configure</tt></h3>

<p>See also the generic GNU installation instructions in 
<a href="INSTALL">INSTALL</a> for information about general options
such as <tt>--prefix</tt> etc.</p>

<dl>
<dt><tt>--with-bdb=ROOT</tt><br /></dt>
<dd><p>Enable use of the Berkeley DB library installed at <em>ROOT</em>.  That means <em>ROOT</em><tt>/include</tt> must contain the BDB header <tt>db.h</tt> and <em>ROOT</em><tt>/lib</tt> must contain the library <tt>libdb.a</tt> (or whatever shared version you have).</p>

<p>Berkeley DB is now distributed and supported by
<a href="http://www.sleepycat.com/">SleepyCat Software</a> and you can
download the library from there.  Versions 3.1.14, 2.7.7 and 2.4.14 (comes
with RedHat 6.2) have been tested and work.</p>
</dd>

<dt><tt>--with-libwww</tt><br /></dt>
<dd><p>Enable use of the W3C <a href="http://www.w3.org/Library/">libwww</a>,
if available.  configure will automatically enable this if
the <tt>libwww-config</tt> program can be found in the path unless
disabled by setting this option to <em>no</em>.  libwww is presently
only used for its
<a href="http://www.w3.org/Library/src/HTRDF.html">RDF parser</a>
</p>

<p><b>WARNING</b> If the libwww libraries are installed in a
non-default directory, when the final linking occurs, the libraries
may not be found at run time.  To fix this you will need to use a
system-specific method of passing this information to the run-time
loader.  On Linux and Solaris you can set the LD_LIBRARY_PATH
environment variable to include the directory where the libwww
libraries are found.  You can also configure it via a system wide
file - see the <tt>ld</tt>, <tt>ld.so</tt> or<tt>ld.so.1</tt> manual
pages for details.  The alternative, to link libwww statically, works
but is difficult to enable.</p>
</dd>

<dt><tt>--with-rdf-java-api=JAR</tt><br /></dt>
<dd><p>Enable the use of Sergey Melnik's
<a href="http://www-db.stanford.edu/~melnik/rdf/api.html">Java API</a>
RDF parser (based on 
<a href="http://www.w3.org/RDF/Implementations/SiRPAC/">SiRPAC</a>)
to generate triples.  You need to download 
the distribution or just the <a href="http://www-diglib.stanford.edu/~melnik/rdf/rdf-api-2000-05-12.jar">rdf-api-2000-05-12.jar</a> file
from <a href="http://www-db.stanford.edu/~melnik/rdf/api.html">his site</a>
enable with this option pointing at the jar file.</p></dd>

<dt><tt>--enable-digests=LIST</tt><br /></dt>
<dd><p>Select the list of digests to be included if the are availble.  The
valid list of digests are: <tt>md5 sha1 ripem160</tt> (the default).  The
digest functions can be provided by external libraries such as
the <a href="http://www.openssl.org/">OpenSSL</a>
libcrypto library or by provided portable
versions (only MD5 supported in this release).</p></dd>

<dt><tt>--with-openssl-digests</tt><br /></dt>
<dd><p>Enable digests provided by the <a href="http://www.openssl.org/">OpenSSL</a> libcrypto library (MD5,
SHA1 and RIPEMD160) if the library is available. configure will
automatically enable this unless disabled by setting this option to
<em>no</em>.</p></dd>

</dl>

<h3>2.3 Configuring</h3>

<p>If everything is in the default place, do:</p>
<pre>
   ./configure
</pre>

<p>More commonly you will be doing something like this, when compiling
with the Java parser:</p>
<pre>
   ./configure --with-rdf-java-api=rdf-api-2000-05-12.jar
</pre>

<p>If you are having problems with configuring several times when
adding or removing options, you may have to tidy up first with either of these:</p>
<pre>
   make clean
   rm -f config.cache
</pre>

<h3>2.4 Compiling</h3>

<pre>
   make
</pre>


<h2>2.5. Testing</h2>

<p>You can build and run the built-in tests with:</p>
<pre>
    make check
</pre>
<p>which should emit loads of exciting debug messages to the screen.</p>

<h3>2.6 Installing the library</h3>

<p>I don't recommended you do this yet, it hasn't been tested
and the user/internal header file separation isn't clear yet.  Just
work in the source tree.</p>
<pre>
   make install
</pre>


<h2>3. Using the library</h2>

<p>There are several example programs included in Redland which can
be compiled with:</p>
<pre>
   make examples
</pre>
<p>once the library has been configured and built.</p>

<p>If no Berkeley DB was found by configure, some of the examples will fail
since there is no on-disk storage system available.  To change them
to use the in-memory hashes, edit the lines reading something like</p>
<pre>
  storage=librdf_new_storage("hashes", "test", "hash_type='bdb',dir='.'");
</pre>
<p>to read</p>
<pre>
  storage=librdf_new_storage("hashes", "test", "hash_type='memory',dir='.'");
</pre>

<p>Note: there is very poor error reporting support at present from
the RDF parsers.  Generally if the results are just an empty model
when something was expected, an error ocurred.  If the URI works (check
it in a browser) then probably it was a parsing problem.</p>

<p>You can check that you have a functioning Java/SiRPAC installation by
running the Java parser directly against some RDF URL, eg.:</p>
<pre>
  java -classpath rdf-api-2000-05-12.jar org.w3c.rdf.examples.ListStatements http://purl.org/dc/index.htm.rdf
</pre>


<h3>3.1. <a href="example1.c">example1.c</a></h3>

<p><tt>example1</tt> uses a RDF parser, if you have one available, to
parse a URI of RDF/XML content, store it in multple Berkeley DB
hashes on the disk and run queries against them.  It takes two
arguments, the first the URI of the RDF/XML content (or
<tt>file:</tt><em>filename</em>) and the second, optional one, is the
name of the RDF parser to use.  At present these can be
<tt>sirpac</tt> or <tt>libwww</tt></p>

<h3>3.2. <a href="example2.c">example2.c</a></h3>

<p><tt>example2</tt> does not use a RDF parser, but reads from a
simple triple dump format and again stores the data on disk in
multiple Berkeley DB hashes.</p>

<h3>3.3. <a href="example3.c">example3.c</a></h3>

<p><tt>example3</tt> contains a 10 line main program that creates
an RDF model, a statement, adds it to the model and stores it on
disk.</p>

<h3>3.4. <a href="example4.c">example4.c</a></h3>

<p><tt>example4</tt> is a utility that allows the parsing, printing
and querying of an existing on disk Berkeley DB-stored RDF model by
statement; source, arc or target node and allows the addition and
removal of statements.  To see a usage message type:</p>
<pre>
  example4
</pre>

<p>For example, to parse some RDF/XML (using SiRPAC java based
parser) into a BerkeleyDB store, print it, do some queries, you could
do the following:</p>
<pre>
  linux$ example4 test parse http://www.ilrt.bristol.ac.uk/people/cmdjb/webwho.xrdf sirpac
  example4: Parsing URI http://www.ilrt.bristol.ac.uk/people/cmdjb/webwho.xrdf
  linux$ example4 test print
  [[
    {[genid:dajobe], [http://xmlns.com/foaf/0.1/img], [http://www.ilrt.bris.ac.uk/people/cmdjb/face.png]}
    {[genid:dajobe], [http://xmlns.com/foaf/0.1/mbox], [mailto:dave.beckett@bristol.ac.uk]}
    {[genid:dajobe], [http://xmlns.com/foaf/0.1/name], "Dave Beckett"}
    {[genid:dajobe], [http://xmlns.com/foaf/0.1/friend], [genid:danbri]}
    {[genid:dajobe], [http://xmlns.com/foaf/0.1/friend], [genid:emiller]}
    {[genid:dajobe], [http://xmlns.com/foaf/0.1/homepage], [http://purl.org/net/dajobe/]}
    {[genid:dajobe], [http://xmlns.com/foaf/0.1/depiction], [http://www.ilrt.bris.ac.uk/people/cmdjb/face.png]}
    {[genid:dajobe], [http://xmlns.com/foaf/0.1/knowsWell], [genid:martinh]}
    {[genid:dajobe], [http://xmlns.com/foaf/0.1/worksWith], [genid:danbri]}
    {[genid:dajobe], [http://xmlns.com/foaf/0.1/worksWith], [genid:libby]}
    {[genid:dajobe], [http://xmlns.com/foaf/0.1/workplaceHomePage], [http://www.ilrt.bris.ac.uk/]}
    {[genid:martinh], [http://xmlns.com/foaf/0.1/mbox], [mailto:martinh@gnu.org]}
    {[genid:martinh], [http://xmlns.com/foaf/0.1/name], "Martin Hamilton"}
    {[genid:martinh], [http://xmlns.com/foaf/0.1/homepage], [http://www.net.lut.ac.uk/~martin/]}
    {[http://www.ilrt.bris.ac.uk/people/cmdjb/face.png], [http://purl.org/dc/elements/1.1/title], "Dave around mid 1998"}
    {[http://www.ilrt.bris.ac.uk/people/cmdjb/face.png], [http://purl.org/dc/elements/1.1/format], "image/png"}
  ]]
  linux$ example4 test targets genid:dajobe http://xmlns.com/foaf/0.1/friend
  Matched node: [genid:danbri]
  Matched node: [genid:emiller]
  example4: matching nodes: 2
  linux$ example4 test statements http://www.ilrt.bris.ac.uk/people/cmdjb/face.png - -
  Matched statement: {[http://www.ilrt.bris.ac.uk/people/cmdjb/face.png], [http://purl.org/dc/elements/1.1/title], "Dave around mid 1998"}
  Matched statement: {[http://www.ilrt.bris.ac.uk/people/cmdjb/face.png], [http://purl.org/dc/elements/1.1/format], "image/png"}
  example4: matching statements: 2
</pre>

<hr />

<p>Copyright 2000 <a href="http://purl.org/net/dajobe/">Dave Beckett</a>, <a href="http://www.ilrt.bristol.ac.uk/">Institute for Learning and Research Technology</a>, <a href="http://www.bristol.ac.uk/">University of Bristol</a></p>

<p><a href="http://www.mirror.ac.uk/services/validator/check/referer">Validate me</a></p>

</body>
</html>
